В этой статье мы увидим, что такое блочная область видимости в Javascript, доступ к переменным с блочной областью действия, чем она отличается от других видов области видимости переменных, на примерах. До ES2015 JavaScript поддерживал область видимости только на функциональном уровне, в отличие от других языков, таких как C++/Java, которые имеют область видимости на уровне блоков. В ES2015, в дополнение к области видимости на уровне функций, JavaScript также поддерживает область видимости на уровне блоков с помощью ключевого слова let и ключевого слова const .

Но прежде чем мы углубимся в детали ES2015, давайте обсудим, что именно мы подразумеваем под фразами «область действия на уровне функций» и «область действия на уровне блоков».

Область уровня блока: эта область ограничивает переменную, объявленную внутри определенного блока, от доступа извне блока. Ключевое слово let & const упрощает блочную область действия переменных. Чтобы получить доступ к переменным этого конкретного блока, нам нужно создать для него объект. Переменные, объявленные с помощью ключевого слова var , не имеют области действия блока.

Например, рассмотрим следующий пример:


{
   пусть р = 110;
   константа q = 111;
}
console.log(р); // Uncaught ReferenceError: p не определен
console.log(q); // Uncaught ReferenceError: q не определен
Здесь мы использовали ключевое слово let & const , чтобы проиллюстрировать область действия на уровне блока, чтобы получить доступ к переменной извне блока.

Область действия уровня функции : доступ к переменным на этом уровне области ограничен только внутри функции, где они объявлены, т. е. к ним можно получить доступ в любом месте внутри этой функции, а не к внешним функциям. Каждый раз, когда при создании функции и в этой области создается новая область, любая переменная может быть доступна любой функции в этой области. Функция или переменные, определенные как глобальная область видимости, будут доступны всем другим переменным или функциям. Теперь давайте посмотрим на область действия функции в JavaScript.

функция printIfGFG(текст){
   if(text=="GeeksforGeeks"|| text=="GFG") {
   var message = "Проверенный гик";
   console.log(сообщение); // Вывод: проверенный гик
}
console.log(сообщение); // Вывод: проверенный гик
}
printIfGFG("GFG");
В приведенном выше фрагменте кода мы объявили и определили переменную message внутри условия if . Затем отобразить вывод значения с помощью функции console.log() .

Сложность заключается в том, что мы также можем напечатать значение переменной ' message ' вне условия if. Это связано с тем, что в JavaScript переменные, объявленные с использованием ключевого слова ' var ', по умолчанию должны функционировать в области видимости . Среда выполнения JavaScript ищет ближайшую охватывающую функцию относительно объявления переменной и устанавливает ее в качестве области действия для этой переменной.

Но как среда выполнения JavaScript делает это? Что ж, здесь стоит упомянуть, что среда выполнения JavaScript внутренне изменяет наш код и перемещает все объявления переменных в начало функции. Это известно как переменный подъем . Итак, наш код в текущем примере эффективно изменен на приведенный ниже фрагмент кода.

функция printIfGFG(текст){
   было сообщение;
   if(text=="GeeksforGeeks"|| text=="GFG") {
   message = "Проверенный гик";
   console.log(сообщение); // Вывод: проверенный гик
}
console.log(сообщение); // Вывод: проверенный гик
}
printIfGFG("GFG");
Чтобы глубже изучить концепцию областей видимости переменных в JavaScript до ES2015, обратитесь к статье Общие сведения об областях видимости переменных в JavaScript .

Итак, теперь, когда мы разобрались, что такое область действия функции и область действия блока, давайте посмотрим, как в ES2015 достигнуты области действия блока в JavaScript. Начиная с ES2015, в дополнение к ключевому слову var , для объявления переменных доступны два новых ключевых слова.

Let: переменные, объявленные с использованием ключевого слова let, аналогичны переменным, объявленным с использованием ключевого слова var, с одним отличием. Переменные, объявленные с помощью 'let', будут иметь область действия блока и не будут подняты до запуска функции. Итак, если мы попытаемся получить доступ к этим переменным за пределами области их блока, мы получим ошибку ссылки, говорящую, что переменная не определена.

функция printIfGFG(текст){
   if(text=="GeeksforGeeks"|| text=="GFG") {
   let message = "Проверенный гик";
   console.log(сообщение); // Вывод: проверенный гик
    }
console.log(сообщение); // Вывод: Uncaught ReferenceError: сообщение не определено
}
printIfGFG("GFG");
Кроме того, переменные, объявленные с помощью ключевого слова «let», могут быть переопределены, но не объявлены повторно.


пусть msg = "Попробуйте еще раз";
msg = "Попробуйте позже"; // Вывод: повторите попытку позже
пусть msg = "Попробуйте еще раз";
let msg = "Попробуйте позже"; // Вывод: Uncaught SyntaxError:
Идентификатор 'msg' уже объявлен
Const: переменные, объявленные с использованием ключевого слова «Const», аналогичны переменным, объявленным с использованием ключевого слова «let», с дополнительной функцией: после объявления и определения их значение нельзя изменить.

Константная переменная в JavaScript — это переменная, которая имеет постоянное или фиксированное значение, которое остается неизменным, т.е. который не меняется на протяжении всей программы. Любая модификация его значения невозможна после его объявления. Если программист попытается изменить ее значение, компилятор выдаст ошибку, потому что, как только мы объявили переменную константой, он сообщает компилятору, что это фиксированное значение, и нельзя вносить в него какие-либо изменения.

Основное использование переменных Const состоит в том, чтобы сделать константы только для чтения, такие как

константа PI = 3,14
константа MAX_USERS = 1000;
Также обязательно определять константные переменные во время самого объявления.

константа пи; // Ошибка синтаксиса
пи = 3,14
Итак, в этом уроке мы рассмотрели два новых ключевых слова, которые можно использовать для объявления переменных в JavaScript. Как только вы начнете использовать эти ключевые слова при объявлении переменных, в редких случаях вам потребуется снова использовать ключевое слово 'var'.


